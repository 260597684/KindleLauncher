<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_29) on Mon Dec 19 14:23:28 CST 2011 -->
<TITLE>
ExtensionsLoader
</TITLE>

<META NAME="date" CONTENT="2011-12-19">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="ExtensionsLoader";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../com/yifanlu/Kindle/package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../com/yifanlu/Kindle/Extension.html" title="class in com.yifanlu.Kindle"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../com/yifanlu/Kindle/JARClassLoader.html" title="class in com.yifanlu.Kindle"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?com/yifanlu/Kindle/ExtensionsLoader.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="ExtensionsLoader.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
com.yifanlu.Kindle</FONT>
<BR>
Class ExtensionsLoader</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../resources/inherit.gif" ALT="extended by "><B>com.yifanlu.Kindle.ExtensionsLoader</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>ExtensionsLoader</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
This class holds the functions for loading and parsing the XML configs from extensions.
<P>

<P>
<DL>
<DT><B>Version:</B></DT>
  <DD>1.0</DD>
<DT><B>Author:</B></DT>
  <DD>Yifan Lu</DD>
</DL>
<HR>

<P>

<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../com/yifanlu/Kindle/ExtensionsLoader.html#ExtensionsLoader(java.io.File)">ExtensionsLoader</A></B>(java.io.File&nbsp;directory)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Create a new extension loader using "directory" as the base</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.ArrayList</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/yifanlu/Kindle/ExtensionsLoader.html#loadExtensions()">loadExtensions</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This converts all the extensions into objects using information from their config.xml and returns an array.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/yifanlu/Kindle/ExtensionsLoader.html#parseInformation(org.kxml2.io.KXmlParser, com.yifanlu.Kindle.Extension)">parseInformation</A></B>(org.kxml2.io.KXmlParser&nbsp;parser,
                 <A HREF="../../../com/yifanlu/Kindle/Extension.html" title="class in com.yifanlu.Kindle">Extension</A>&nbsp;extObj)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This parses the "information" section of the config.xml file.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/yifanlu/Kindle/ExtensionsLoader.html#parseMenus(org.kxml2.io.KXmlParser, com.yifanlu.Kindle.Extension, java.io.File)">parseMenus</A></B>(org.kxml2.io.KXmlParser&nbsp;parser,
           <A HREF="../../../com/yifanlu/Kindle/Extension.html" title="class in com.yifanlu.Kindle">Extension</A>&nbsp;extObj,
           java.io.File&nbsp;extDir)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This parses the "menus" section of the config.xml file.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="ExtensionsLoader(java.io.File)"><!-- --></A><H3>
ExtensionsLoader</H3>
<PRE>
public <B>ExtensionsLoader</B>(java.io.File&nbsp;directory)</PRE>
<DL>
<DD>Create a new extension loader using "directory" as the base
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>directory</CODE> - Where the extensions are located. Each extension must be in its own folder and contain config.xml.</DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="loadExtensions()"><!-- --></A><H3>
loadExtensions</H3>
<PRE>
public java.util.ArrayList <B>loadExtensions</B>()</PRE>
<DL>
<DD>This converts all the extensions into objects using information from their config.xml and returns an array.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>A list of extensions that are loaded or an empty list of no extension is loaded successfully.</DL>
</DD>
</DL>
<HR>

<A NAME="parseInformation(org.kxml2.io.KXmlParser, com.yifanlu.Kindle.Extension)"><!-- --></A><H3>
parseInformation</H3>
<PRE>
protected void <B>parseInformation</B>(org.kxml2.io.KXmlParser&nbsp;parser,
                                <A HREF="../../../com/yifanlu/Kindle/Extension.html" title="class in com.yifanlu.Kindle">Extension</A>&nbsp;extObj)
                         throws java.io.IOException,
                                org.xmlpull.v1.XmlPullParserException</PRE>
<DL>
<DD>This parses the "information" section of the config.xml file. This section contains information about the
 extension. This information is currently unused, but may be useful in the future so it is recommended that
 all extensions contain it. The format is
 <p/>
 <pre>
      &lt;information&gt;
          &lt;name&gt;Name of the plugin&lt;/name&gt;
          &lt;version&gt;Version of the plugin&lt;/version&gt;
          &lt;author&gt;Author of the plugin&lt;/author&gt;
          &lt;id&gt;Unique id of the plugin&lt;/id&gt;
      &lt;/information&gt;
 </pre>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>parser</CODE> - <CODE>KXmlParser</CODE><DD><CODE>extObj</CODE> - The <A HREF="../../../com/yifanlu/Kindle/Extension.html" title="class in com.yifanlu.Kindle"><CODE>Extension</CODE></A> object to fill.
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - if the config cannot be read cannot be accessed
<DD><CODE>org.xmlpull.v1.XmlPullParserException</CODE> - if the config is malformed</DL>
</DD>
</DL>
<HR>

<A NAME="parseMenus(org.kxml2.io.KXmlParser, com.yifanlu.Kindle.Extension, java.io.File)"><!-- --></A><H3>
parseMenus</H3>
<PRE>
protected void <B>parseMenus</B>(org.kxml2.io.KXmlParser&nbsp;parser,
                          <A HREF="../../../com/yifanlu/Kindle/Extension.html" title="class in com.yifanlu.Kindle">Extension</A>&nbsp;extObj,
                          java.io.File&nbsp;extDir)
                   throws java.io.IOException,
                          org.xmlpull.v1.XmlPullParserException,
                          java.lang.ClassNotFoundException,
                          java.lang.IllegalAccessException,
                          java.lang.InstantiationException,
                          org.json.simple.parser.ParseException</PRE>
<DL>
<DD>This parses the "menus" section of the config.xml file. The "menus" section can contain one or more list of
 menu options that are loaded by either JSON or Java. All menu options from each list are added to the main menu.
 The format of the entries in config.xml for the menus section is
 <p/>
 <pre>
      &lt;menus&gt;
          &lt;menu type=&quot;VALUE&quot; jar=&quot;VALUE&quot; dynamic=&quot;VALUE&quot;&gt;TEXT&lt;/menu&gt;
      &lt;/menus&gt;
 </pre>
 <p/>
 Where type is either "java" or "json", jar is required only for "java" types and is the path to the Jar file
 containing the Menuable class relative to config.xml, dynamic is required only for JSON types and tells the
 loader to re-read the JSON file each time the menu is opened, and the text of the element is either the path
 to the JSON menu file or the Java class to load.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>parser</CODE> - <CODE>KXmlParser</CODE><DD><CODE>extObj</CODE> - The <A HREF="../../../com/yifanlu/Kindle/Extension.html" title="class in com.yifanlu.Kindle"><CODE>Extension</CODE></A> object to fill.<DD><CODE>extDir</CODE> - The path to the extension's directory
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - if the config cannot be read or the extension directory cannot be accessed
<DD><CODE>org.xmlpull.v1.XmlPullParserException</CODE> - if the config is malformed
<DD><CODE>java.lang.ClassNotFoundException</CODE> - if the menu type is Java and the class specified cannot be loaded
<DD><CODE>java.lang.IllegalAccessException</CODE> - if the menu type is Java and the class specified cannot be accessed
<DD><CODE>java.lang.InstantiationException</CODE> - if the menu type is Java and the class specified cannot be instantiated
<DD><CODE>org.json.simple.parser.ParseException</CODE> - if the config file cannot be parsed correctly</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../com/yifanlu/Kindle/package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../com/yifanlu/Kindle/Extension.html" title="class in com.yifanlu.Kindle"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../com/yifanlu/Kindle/JARClassLoader.html" title="class in com.yifanlu.Kindle"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?com/yifanlu/Kindle/ExtensionsLoader.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="ExtensionsLoader.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
