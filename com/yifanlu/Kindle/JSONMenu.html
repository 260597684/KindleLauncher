<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_29) on Mon Dec 19 14:23:29 CST 2011 -->
<TITLE>
JSONMenu
</TITLE>

<META NAME="date" CONTENT="2011-12-19">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="JSONMenu";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../com/yifanlu/Kindle/package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../com/yifanlu/Kindle/JARClassLoader.html" title="class in com.yifanlu.Kindle"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../com/yifanlu/Kindle/KindleLauncher.html" title="class in com.yifanlu.Kindle"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?com/yifanlu/Kindle/JSONMenu.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="JSONMenu.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
com.yifanlu.Kindle</FONT>
<BR>
Class JSONMenu</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../resources/inherit.gif" ALT="extended by "><B>com.yifanlu.Kindle.JSONMenu</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD><A HREF="../../../com/yifanlu/Kindle/Menuable.html" title="interface in com.yifanlu.Kindle">Menuable</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public class <B>JSONMenu</B><DT>extends java.lang.Object<DT>implements <A HREF="../../../com/yifanlu/Kindle/Menuable.html" title="interface in com.yifanlu.Kindle">Menuable</A></DL>
</PRE>

<P>
This class holds the menu options for a JSON menu.
<P>

<P>
<DL>
<DT><B>Version:</B></DT>
  <DD>1.0</DD>
<DT><B>Author:</B></DT>
  <DD>Yifan Lu</DD>
</DL>
<HR>

<P>

<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../com/yifanlu/Kindle/JSONMenu.html#JSONMenu(java.io.File)">JSONMenu</A></B>(java.io.File&nbsp;jsonFile)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Create a new JSONMenu object with the JSON file.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/yifanlu/Kindle/JSONMenu.html#addItemsToMenu(com.yifanlu.Kindle.LauncherMenu)">addItemsToMenu</A></B>(<A HREF="../../../com/yifanlu/Kindle/LauncherMenu.html" title="class in com.yifanlu.Kindle">LauncherMenu</A>&nbsp;menu)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If the menu is dynamic as specified in config.xml, it will first call <A HREF="../../../com/yifanlu/Kindle/JSONMenu.html#parseJSONMenu()"><CODE>parseJSONMenu()</CODE></A>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/yifanlu/Kindle/JSONMenu.html#isDynamic()">isDynamic</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If dynamic, the menu will be re-parsed from the JSON file each time it is rendered.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../com/yifanlu/Kindle/LauncherAction.html" title="class in com.yifanlu.Kindle">LauncherAction</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/yifanlu/Kindle/JSONMenu.html#jsonToAction(org.json.simple.JSONObject, com.yifanlu.Kindle.LauncherMenu)">jsonToAction</A></B>(org.json.simple.JSONObject&nbsp;json,
             <A HREF="../../../com/yifanlu/Kindle/LauncherMenu.html" title="class in com.yifanlu.Kindle">LauncherMenu</A>&nbsp;parent)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Recursively reads the JSON data and converts it to a <A HREF="../../../com/yifanlu/Kindle/LauncherAction.html" title="class in com.yifanlu.Kindle"><CODE>LauncherAction</CODE></A> which contains either a
 <A HREF="../../../com/yifanlu/Kindle/LauncherScript.html" title="class in com.yifanlu.Kindle"><CODE>LauncherScript</CODE></A> which executes a shell command when called or a <A HREF="../../../com/yifanlu/Kindle/LauncherMenu.html" title="class in com.yifanlu.Kindle"><CODE>LauncherMenu</CODE></A> which contains
 other <A HREF="../../../com/yifanlu/Kindle/LauncherAction.html" title="class in com.yifanlu.Kindle"><CODE>LauncherAction</CODE></A> items.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/yifanlu/Kindle/JSONMenu.html#parseJSONMenu()">parseJSONMenu</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Takes the JSON file stored in the object and converts it to menu item objects.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/yifanlu/Kindle/JSONMenu.html#setDynamic(boolean)">setDynamic</A></B>(boolean&nbsp;dynamic)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets the dynamic status of the menu</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="JSONMenu(java.io.File)"><!-- --></A><H3>
JSONMenu</H3>
<PRE>
public <B>JSONMenu</B>(java.io.File&nbsp;jsonFile)</PRE>
<DL>
<DD>Create a new JSONMenu object with the JSON file. The format of the JSON menu is
 <p/>
 <pre>
     {
         "items": [
              {"name": "Main Menu, Item 1", "priority": 0, "action": "bin/action.sh", "params": "item1"},
              {
                  "name": "Main Menu, Submenu 1",
                  "priority": 1,
                  "items": [
                      {"name": "Submenu 1, Item 1", "priority": 0, "action": "/sbin/restart", "params": ""}
                  ]
              }
         ]
     }
 </pre>
 <p/>
 For each menu item, the "name" is the text that shows up and the "priority" is the order that they show up in
 (if two items have the same priority, they are sorted in alphabetical order). If the item is an action, the
 "action" contains the script to run and "params" contains the parameters. If the script name starts with a slash,
 it is an absolute path, otherwise it is relative to the path of the JSON file. If the item is a submenu, it
 will contain "items" instead of "action" and "params" and "items" is an array of menu items.
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>jsonFile</CODE> - A text file that contains the JSON data.</DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="addItemsToMenu(com.yifanlu.Kindle.LauncherMenu)"><!-- --></A><H3>
addItemsToMenu</H3>
<PRE>
public void <B>addItemsToMenu</B>(<A HREF="../../../com/yifanlu/Kindle/LauncherMenu.html" title="class in com.yifanlu.Kindle">LauncherMenu</A>&nbsp;menu)</PRE>
<DL>
<DD>If the menu is dynamic as specified in config.xml, it will first call <A HREF="../../../com/yifanlu/Kindle/JSONMenu.html#parseJSONMenu()"><CODE>parseJSONMenu()</CODE></A>. Then it
 adds the menu options specified by the JSON file to the menu of the caller. The caller will most likely be
 the main Launcher menu.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../com/yifanlu/Kindle/Menuable.html#addItemsToMenu(com.yifanlu.Kindle.LauncherMenu)">addItemsToMenu</A></CODE> in interface <CODE><A HREF="../../../com/yifanlu/Kindle/Menuable.html" title="interface in com.yifanlu.Kindle">Menuable</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>menu</CODE> - The menu of the caller.</DL>
</DD>
</DL>
<HR>

<A NAME="setDynamic(boolean)"><!-- --></A><H3>
setDynamic</H3>
<PRE>
public void <B>setDynamic</B>(boolean&nbsp;dynamic)</PRE>
<DL>
<DD>Sets the dynamic status of the menu
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>dynamic</CODE> - Should the menu be dynamic?<DT><B>See Also:</B><DD><A HREF="../../../com/yifanlu/Kindle/JSONMenu.html#isDynamic()"><CODE>isDynamic()</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="isDynamic()"><!-- --></A><H3>
isDynamic</H3>
<PRE>
public boolean <B>isDynamic</B>()</PRE>
<DL>
<DD>If dynamic, the menu will be re-parsed from the JSON file each time it is rendered. This is useful if you have
 a dynamic script that can alter the JSON menu when ran.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>The dynamic status of the menu</DL>
</DD>
</DL>
<HR>

<A NAME="parseJSONMenu()"><!-- --></A><H3>
parseJSONMenu</H3>
<PRE>
public void <B>parseJSONMenu</B>()
                   throws java.io.IOException,
                          org.json.simple.parser.ParseException</PRE>
<DL>
<DD>Takes the JSON file stored in the object and converts it to menu item objects.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - if there is a problem reading the JSON text
<DD><CODE>org.json.simple.parser.ParseException</CODE> - if there is a problem parsing the JSON text</DL>
</DD>
</DL>
<HR>

<A NAME="jsonToAction(org.json.simple.JSONObject, com.yifanlu.Kindle.LauncherMenu)"><!-- --></A><H3>
jsonToAction</H3>
<PRE>
protected <A HREF="../../../com/yifanlu/Kindle/LauncherAction.html" title="class in com.yifanlu.Kindle">LauncherAction</A> <B>jsonToAction</B>(org.json.simple.JSONObject&nbsp;json,
                                      <A HREF="../../../com/yifanlu/Kindle/LauncherMenu.html" title="class in com.yifanlu.Kindle">LauncherMenu</A>&nbsp;parent)
                               throws java.io.IOException</PRE>
<DL>
<DD>Recursively reads the JSON data and converts it to a <A HREF="../../../com/yifanlu/Kindle/LauncherAction.html" title="class in com.yifanlu.Kindle"><CODE>LauncherAction</CODE></A> which contains either a
 <A HREF="../../../com/yifanlu/Kindle/LauncherScript.html" title="class in com.yifanlu.Kindle"><CODE>LauncherScript</CODE></A> which executes a shell command when called or a <A HREF="../../../com/yifanlu/Kindle/LauncherMenu.html" title="class in com.yifanlu.Kindle"><CODE>LauncherMenu</CODE></A> which contains
 other <A HREF="../../../com/yifanlu/Kindle/LauncherAction.html" title="class in com.yifanlu.Kindle"><CODE>LauncherAction</CODE></A> items.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>json</CODE> - The JSON object to parse<DD><CODE>parent</CODE> - The menu to add the items to
<DT><B>Returns:</B><DD>The <A HREF="../../../com/yifanlu/Kindle/LauncherAction.html" title="class in com.yifanlu.Kindle"><CODE>LauncherAction</CODE></A> that is defined by the JSON data
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - if there are problems reading the JSON file</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../com/yifanlu/Kindle/package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../com/yifanlu/Kindle/JARClassLoader.html" title="class in com.yifanlu.Kindle"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../com/yifanlu/Kindle/KindleLauncher.html" title="class in com.yifanlu.Kindle"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?com/yifanlu/Kindle/JSONMenu.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="JSONMenu.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
